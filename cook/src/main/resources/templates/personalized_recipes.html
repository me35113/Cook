<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>마이냉장고</title>
    <link rel="stylesheet" th:href="@{/css/mypage.css}">
</head>
<body class="mypage-body">

    <div th:replace="top :: topFragment"></div>

    <div class="main-content">
        <div class="left-panel"></div>
        <!-- 메인 패널 시작 -->
        <div class="center-panel">
        	<div class="page1">
        		<div class="mypage-recipes">
        			<div class="page1-1">
						<div class="page1-btn" onclick="location.href='/ingredients'">나의 재료</div>
						<div class="page1-btn" onclick="location.href='/manage_ingredients'">재료 관리법</div>
						<div class="page1-btn" style="background-color: #FFFAE9;" onclick="location.href='/personalized_recipes'">맞춤 레시피</div>
        			</div>
<!-- 레시피 있을 때 -->
<div class="page1-2" th:if="${not #lists.isEmpty(recipes)}"
     style="display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(2, 230px); gap: 20px;">
  <div th:each="recipe : ${recipes}" class="recipe-panel"
       style="border: 1px solid #ccc; display: flex; flex-direction: column; gap: 10px;">

    <!-- 이미지 -->
    <div style="height: 150px; overflow: hidden;">
      <img th:src="@{/images/{img}(img=${recipe.completionUrl})}" alt="레시피 이미지"
           style="width: 100%; height: 100%; object-fit: cover;" />
    </div>

    <!-- 제목 -->
    <h3 th:text="${recipe.title}"
        style="margin: 0; font-weight: bold; padding: 10px;"></h3>

    <!-- 작성자 ID -->
    <div style="padding-left: 10px;">
      <span th:text="${recipe.userId}"></span>
    </div>
  </div>
</div>

<!-- 레시피 없을 때 -->
<div class="page1-2"
     th:if="${#lists.isEmpty(recipes)}"
     style="grid-column: 1 / -1; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; height: 500px; gap: 40px;">
  <img src="/images/plus.png" alt="레시피 없음"
       style="max-height: 300px;" />
  <div style="font-size: 25px; font-weight: bold; color: #333;">
    재료를 추가해보세요!
  </div>
  <a href="/ingredients_add" 
     style="display: inline-block; background-color: #1A15A8; color: white; padding: 10px 40px; border-radius: 8px; font-size: 20px; font-weight: bold; text-decoration: none;">
    추가하기
  </a>
</div>

<!-- 페이지네이션 -->
<div class="page1-3" th:if="${not #lists.isEmpty(recipes)}" style="margin-top: 20px;">
  <nav aria-label="Page navigation">
    <div style="display: flex; justify-content: space-between; align-items: center; text-align: center; height: 40px;">

      <!-- 이전 -->
      <div style="width: 10%; display: flex; justify-content: center;">
        <ul style="list-style: none; padding: 0; margin: 0;">
          <li th:classappend="${recipePage.hasPrevious()} ? '' : 'disabled'">
            <a th:href="@{/personalized_recipes(page=${recipePage.number - 1}, size=${recipePage.size})}" 
               th:if="${recipePage.hasPrevious()}"
               style="cursor: pointer; text-decoration: none; color: black;">이전</a>
            <span th:if="${!recipePage.hasPrevious()}">이전</span>
          </li>
        </ul>
      </div>

      <!-- 페이지 번호 -->
      <div style="width: 80%; display: flex; justify-content: center;">
        <ul style="list-style: none; display: flex; gap: 20px; padding: 0; margin: 0;">
          <li th:each="i : ${#numbers.sequence(0, recipePage.totalPages - 1)}">
            <a th:href="@{/personalized_recipes(page=${i}, size=${recipePage.size})}"
               th:text="${i + 1}"
               th:style="${i == recipePage.number} ? 'font-weight: bold; text-decoration: none; color: black;' : 'text-decoration: none; color: black;'"
               style="padding: 5px 10px; border: 1px solid #ccc;"></a>
          </li>
        </ul>
      </div>

      <!-- 다음 -->
      <div style="width: 10%; display: flex; justify-content: center;">
        <ul style="list-style: none; padding: 0; margin: 0;">
          <li th:classappend="${recipePage.hasNext()} ? '' : 'disabled'">
            <a th:href="@{/personalized_recipes(page=${recipePage.number + 1}, size=${recipePage.size})}"
               th:if="${recipePage.hasNext()}"
               style="cursor: pointer; text-decoration: none; color: black;">다음</a>
            <span th:if="${!recipePage.hasNext()}">다음</span>
          </li>
        </ul>
      </div>

    </div>
  </nav>
</div>

        		</div>
        	</div>
        	<div class="page2">
        		<div class="myprofile">
				    <div class="myprofile-item item1">패널 1</div>
				    <div class="myprofile-item item2">닉네임</div>
				    <div class="myprofile-item item3">설명</div>
				    <div class="myprofile-item item4">
				        <div class="sub-panel">1</div>
   						<div class="sub-panel">2</div>
				    </div>
				    <div class="myprofile-item item5">
				    	<div class="edit-button" onclick="/* 프로필 편집 액션 함수 호출 */">프로필 편집</div>
				    </div>
        		</div>
        	</div>
        </div>
        <!-- 메인 패널 끝 -->
        <div class="right-panel"></div>
    </div>

    <div th:replace="bottom :: bottomFragment"></div>

</body>
</html>
